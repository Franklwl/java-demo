plugins {
    id 'java'
    id 'application'
}

repositories {
    jcenter()

    // This will not always be required.  The 1.4 release will be in jcenter.
    maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }
}

dependencies {
    // Remember to remove "-SNAPSHOT" after 1.4 is released!
    implementation 'org.pytorch:pytorch_java_only:1.4.0-SNAPSHOT'
}

def LIBTORCH_HOME = System.getenv('LIBTORCH_HOME')
if (!LIBTORCH_HOME) {
  throw new RuntimeException('LIBTORCH_HOME not present in environment.');
}
if (!file(LIBTORCH_HOME).isDirectory()) {
  throw new RuntimeException('LIBTORCH_HOME does not refer to a directory.');
}

application {
    mainClassName = 'demo.App'
    applicationDefaultJvmArgs = ["-Djava.library.path=$LIBTORCH_HOME/lib"]
}
